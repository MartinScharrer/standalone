\ifx\standalone\undefined
\newif\ifstandalone

\def\sa@name{standalone}

\makeatletter
\ifx\documentclass\@twoclasseserror
\else
  \global\standalonetrue
\fi

\ifstandalone
\newenvironment{standalone}%
{\document\preview}
{\endpreview\enddocument}
\else
\newenvironment{standalone}{}{}
\fi

\ifstandalone
\ProvidesPackage{standalone}[2010/01/21 Allow TeX snippets to be included or be compile standalone]

\documentclass{article}
\usepackage[active,tightpage]{preview}
\pagestyle{empty}

\fi
\fi

